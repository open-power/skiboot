
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Get/Set System Parameters &#8212; skiboot 326a466
 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="OPAL PCI Config Space Access" href="opal-pci-config-read-write-13-14-15-16-17-18.html" />
    <link rel="prev" title="OPAL NVRAM" href="opal-nvram-read-write-7-8.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="opal-pci-config-read-write-13-14-15-16-17-18.html" title="OPAL PCI Config Space Access"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="opal-nvram-read-write-7-8.html" title="OPAL NVRAM"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">skiboot 326a466
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">OPAL API Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Get/Set System Parameters</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="get-set-system-parameters">
<span id="opal-sysparams"></span><h1>Get/Set System Parameters<a class="headerlink" href="#get-set-system-parameters" title="Permalink to this headline">¶</a></h1>
<p>The usual way for setting system parameters is via IPMI for things controlled
by the service processor, or through NVRAM for things controlled by host
firmware. However, some platforms may have other options not easily (or
possible to be) exposed over IPMI. These OPAL calls will read (and write)
these parameters.</p>
<p>The list of parameters is set at boot time, and is represented in the device
tree (see <a class="reference internal" href="../device-tree/ibm%2Copal/sysparams.html#device-tree-ibm-opal-sysparams"><span class="std std-ref">sysparams</span></a> for details).</p>
<p>Currently only implemented on FSP based systems.</p>
<section id="opal-get-param">
<span id="id1"></span><h2>OPAL_GET_PARAM<a class="headerlink" href="#opal-get-param" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define OPAL_GET_PARAM                               89</span>

<span class="kt">int64_t</span><span class="w"> </span><span class="nf">fsp_opal_get_param</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">async_token</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">param_id</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">length</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Get the current setting of <cite>param_id</cite>. This is an asynchronous call as OPAL may
need to communicate with a service processor. The <cite>param_id</cite> and <cite>length</cite> are
described in the device tree for each parameter (see
<a class="reference internal" href="../device-tree/ibm%2Copal/sysparams.html#device-tree-ibm-opal-sysparams"><span class="std std-ref">sysparams</span></a> for details).</p>
<section id="returns">
<h3>Returns<a class="headerlink" href="#returns" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><a class="reference internal" href="return-codes.html#opal-hardware"><span class="std std-ref">OPAL_HARDWARE</span></a></dt><dd><p>Hardware issue prevents retreiving parameter. e.g. FSP is offline or
absent.</p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-parameter"><span class="std std-ref">OPAL_PARAMETER</span></a></dt><dd><p>Invalid <cite>param_id</cite></p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-permission"><span class="std std-ref">OPAL_PERMISSION</span></a></dt><dd><p>Not allowed to read parameter.</p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-no-mem"><span class="std std-ref">OPAL_NO_MEM</span></a></dt><dd><p>Not enough free memory in OPAL to process request.</p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-internal-error"><span class="std std-ref">OPAL_INTERNAL_ERROR</span></a></dt><dd><p>Other internal OPAL error</p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-async-completion"><span class="std std-ref">OPAL_ASYNC_COMPLETION</span></a></dt><dd><p>Request is submitted.</p>
</dd>
</dl>
</section>
</section>
<section id="opal-set-param">
<span id="id2"></span><h2>OPAL_SET_PARAM<a class="headerlink" href="#opal-set-param" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define OPAL_SET_PARAM                               90</span>

<span class="kt">int64_t</span><span class="w"> </span><span class="nf">fsp_opal_set_param</span><span class="p">(</span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">async_token</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">param_id</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">length</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Write a new setting for <cite>param_id</cite>. This is an asynchronous call as OPAL may
need to communicate with a service processor. The <cite>param_id</cite> and <cite>length</cite> are
described in the device tree for each parameter (see
<a class="reference internal" href="../device-tree/ibm%2Copal/sysparams.html#device-tree-ibm-opal-sysparams"><span class="std std-ref">sysparams</span></a> for details).</p>
<section id="id3">
<h3>Returns<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><a class="reference internal" href="return-codes.html#opal-hardware"><span class="std std-ref">OPAL_HARDWARE</span></a></dt><dd><p>Hardware issue prevents retreiving parameter. e.g. FSP is offline or
absent.</p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-parameter"><span class="std std-ref">OPAL_PARAMETER</span></a></dt><dd><p>Invalid <cite>param_id</cite></p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-permission"><span class="std std-ref">OPAL_PERMISSION</span></a></dt><dd><p>Not allowed to write parameter.</p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-no-mem"><span class="std std-ref">OPAL_NO_MEM</span></a></dt><dd><p>Not enough free memory in OPAL to process request.</p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-internal-error"><span class="std std-ref">OPAL_INTERNAL_ERROR</span></a></dt><dd><p>Other internal OPAL error</p>
</dd>
<dt><a class="reference internal" href="return-codes.html#opal-async-completion"><span class="std std-ref">OPAL_ASYNC_COMPLETION</span></a></dt><dd><p>Request is submitted.</p>
</dd>
</dl>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Get/Set System Parameters</a><ul>
<li><a class="reference internal" href="#opal-get-param">OPAL_GET_PARAM</a><ul>
<li><a class="reference internal" href="#returns">Returns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#opal-set-param">OPAL_SET_PARAM</a><ul>
<li><a class="reference internal" href="#id3">Returns</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="opal-nvram-read-write-7-8.html"
                        title="previous chapter">OPAL NVRAM</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="opal-pci-config-read-write-13-14-15-16-17-18.html"
                        title="next chapter">OPAL PCI Config Space Access</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/opal-api/opal-param-89-90.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="opal-pci-config-read-write-13-14-15-16-17-18.html" title="OPAL PCI Config Space Access"
             >next</a> |</li>
        <li class="right" >
          <a href="opal-nvram-read-write-7-8.html" title="OPAL NVRAM"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">skiboot 326a466
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >OPAL API Documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Get/Set System Parameters</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2017, IBM, others.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>