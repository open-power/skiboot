
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>power-mgt/psr &#8212; skiboot 096ebcf
 documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Secvar Binding" href="../secvar.html" />
    <link rel="prev" title="power-mgt/powercap" href="powercap.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../secvar.html" title="Secvar Binding"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="powercap.html" title="power-mgt/powercap"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">skiboot 096ebcf
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Device Tree</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../ibm,opal.html" >ibm,opal</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../power-mgt.html" accesskey="U">ibm,opal/power-mgt device tree entries</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="power-mgt-psr">
<h1>power-mgt/psr<a class="headerlink" href="#power-mgt-psr" title="Permalink to this headline">¶</a></h1>
<p>Some systems allow modification of how power consumption throttling
is balanced between entities in a system. A typical one may be how the power
management complex should balance throttling CPU versus the GPU. An OPAL
call can be used to set these ratios, which are described in the device
tree.</p>
<p>In the future, there may be more available settings than just CPU
versus GPU.</p>
<p>Each child node in the “psr” node represents a configurable psr
sensor.</p>
<dl class="docutils">
<dt>For example <span class="classifier-delimiter">:</span> <span class="classifier">::</span></dt>
<dd>cpu-to-gpu&#64;1</dd>
</dl>
<p>The compatible property is set to “ibm,opal-power-shift-ratio”.</p>
<p>Each child node has below properties:</p>
<dl class="docutils">
<dt><cite>handle</cite></dt>
<dd>Handle to indicate the type of psr</dd>
<dt><cite>label</cite></dt>
<dd>Name of the psr sensor</dd>
</dl>
<p>The format of the handle is internal, and <code class="docutils literal notranslate"><span class="pre">not</span></code> ABI, although
currently it uses the following encoding</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span> <span class="n">Class</span> <span class="o">|</span><span class="n">Reserved</span><span class="o">|</span>  <span class="n">RID</span> <span class="o">|</span> <span class="n">Type</span> <span class="o">|</span>
<span class="o">|-------|--------|------|------|</span>
</pre></div>
</div>
<div class="highlight-dts notranslate"><div class="highlight"><pre><span></span><span class="nc">power-mgt</span> <span class="p">{</span>
  <span class="nc">psr</span> <span class="p">{</span>
     <span class="nf">compatible</span> <span class="o">=</span> <span class="s">&quot;ibm,opal-power-shift-ratio&quot;</span><span class="p">;</span>

     <span class="nc">cpu-to-gpu</span><span class="nf">@0</span> <span class="p">{</span>
             <span class="nf">name</span> <span class="o">=</span> <span class="s">&quot;cpu-to-gpu&quot;</span><span class="p">;</span>
             <span class="nf">handle</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x00000000</span><span class="p">&gt;;</span>
             <span class="nf">label</span> <span class="o">=</span> <span class="s">&quot;cpu_to_gpu_0&quot;</span><span class="p">;</span>
     <span class="p">};</span>

     <span class="nc">cpu-to-gpu</span><span class="nf">@1</span> <span class="p">{</span>
             <span class="nf">name</span> <span class="o">=</span> <span class="s">&quot;cpu-to-gpu&quot;</span><span class="p">;</span>
             <span class="nf">handle</span> <span class="o">=</span> <span class="p">&lt;</span><span class="mh">0x00000100</span><span class="p">&gt;;</span>
             <span class="nf">label</span> <span class="o">=</span> <span class="s">&quot;cpu_to_gpu_1&quot;</span><span class="p">;</span>
     <span class="p">};</span>
  <span class="p">};</span>
 <span class="p">};</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="powercap.html"
                        title="previous chapter">power-mgt/powercap</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../secvar.html"
                        title="next chapter">Secvar Binding</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/device-tree/ibm,opal/power-mgt/psr.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../secvar.html" title="Secvar Binding"
             >next</a> |</li>
        <li class="right" >
          <a href="powercap.html" title="power-mgt/powercap"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">skiboot 096ebcf
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Device Tree</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../ibm,opal.html" >ibm,opal</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../power-mgt.html" >ibm,opal/power-mgt device tree entries</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2017, IBM, others.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>