
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>skiboot-5.4.0-rc1 &#8212; skiboot d6d8386
 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skiboot-5.4.0-rc2" href="skiboot-5.4.0-rc2.html" />
    <link rel="prev" title="skiboot-5.4.0" href="skiboot-5.4.0.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="skiboot-5.4.0-rc2.html" title="skiboot-5.4.0-rc2"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="skiboot-5.4.0.html" title="skiboot-5.4.0"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">skiboot d6d8386
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Release Notes</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="skiboot-5-4-0-rc1">
<span id="id1"></span><h1>skiboot-5.4.0-rc1<a class="headerlink" href="#skiboot-5-4-0-rc1" title="Permalink to this headline">¶</a></h1>
<p>skiboot-5.4.0-rc1 was released on Monday October 17th 2016. It is the first
release candidate of skiboot 5.4, which will become the new stable release
of skiboot following the 5.3 release, first released August 2nd 2016.</p>
<p>skiboot-5.4.0-rc1 contains all bug fixes as of <a class="reference internal" href="skiboot-5.3.7.html#skiboot-5-3-7"><span class="std std-ref">skiboot-5.3.7</span></a>
and <a class="reference internal" href="skiboot-5.1.18.html#skiboot-5-1-18"><span class="std std-ref">skiboot-5.1.18</span></a> (the currently maintained stable releases).</p>
<p>For how the skiboot stable releases work, see <a class="reference internal" href="../process/stable-skiboot-rules.html#stable-rules"><span class="std std-ref">Skiboot stable tree rules and releases</span></a> for details.</p>
<p>The current plan is to release a new release candidate every week until we
feel good about it. The aim is for skiboot-5.4.x to be in op-build v1.13, which
is due by November 23rd 2016.</p>
<p>Over skiboot-5.3, we have the following changes:</p>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Initial Trusted Boot support (see <a class="reference internal" href="../stb.html#stb-overview"><span class="std std-ref">Secure and Trusted Boot Library (LibSTB) Documentation</span></a>).
There are several limitations with this initial release:</p>
<blockquote>
<div><ul class="simple">
<li>CAPP partition is not measured correctly</li>
<li>Only Nuvoton TPM 2.0 is supported</li>
<li>Requires hardware rework on late revision Habanero or Firestone boards
in order to install TPM.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Add i2c Nuvoton TPM 2.0 Driver</li>
<li>romcode driver for POWER8 secure ROM</li>
<li>See Device tree docs for tpm and ibm,secureboot nodes</li>
<li>See main secure and trusted boot documentation.</li>
</ul>
</li>
<li><p class="first">Fast reboot for P8</p>
<p>This makes reboot take an <em>awful</em> lot less time, somewhere between four
and ten times faster than a full IPL. It is currently experimental and not
enabled by default.
You can enable the experimental support via nvram option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># nvram -p ibm,skiboot --update-config experimental-fast-reset=feeling-lucky</span>
</pre></div>
</div>
<p><strong>WARNING</strong>: This has <em>known</em> bugs. For example, if you have used a device
in CAPI mode, we will currently <em>NOT</em> reset it back to plain PCI. There
are also some known issues in most simulators.</p>
</li>
<li><p class="first">Support <code class="docutils literal notranslate"><span class="pre">ibm,skiboot</span></code> NVRAM partition with skiboot configuration options.</p>
<ul class="simple">
<li>These should generally only be used if you either completely know what
you are doing or need to work around a skiboot bug. They are <strong>not</strong>
intended for end users.</li>
<li>Add support for supplying the kernel boot arguments from the <code class="docutils literal notranslate"><span class="pre">bootargs</span></code>
configuration string in the <code class="docutils literal notranslate"><span class="pre">ibm,skiboot</span></code> NVRAM partition.</li>
<li>Enabling the experimental fast reset feature is done via this method.</li>
</ul>
</li>
<li><p class="first">Add support for nap mode on P8 while in skiboot</p>
<ul class="simple">
<li>While nap has been exposed to the Operating System since day 1, we have
not utilized low power states when in skiboot itself, leading to higher
power consumption during boot.
We only enable the functionality after the 0x100 vector has been
patched, and we disable it before transferring control to Linux.</li>
</ul>
</li>
<li><p class="first">libflash: add 128MB MX66L1G45G part</p>
</li>
<li><p class="first">Pointer validation of OPAL API call arguments.</p>
<ul class="simple">
<li>If the kernel called an OPAL API with vmalloc’d address
or any other address range in real mode, we would hit
a problem with aliasing. Since the top 4 bits are ignored
in real mode, pointers from 0xc.. and 0xd.. (and other ranges)
could collide and lead to hard to solve bugs. This patch
adds the infrastructure for pointer validation and a simple
test case for testing the API</li>
<li>The checks validate pointers sent in using <code class="docutils literal notranslate"><span class="pre">opal_addr_valid()</span></code></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>There have been a number of documentation fixes this release. Most prominent
is the switch to Sphinx (from the Python project) and ReStructured Text (RST)
as the documentation format. RST and Sphinx enable both production of pretty
documentation in HTML and PDF formats while remaining readable in their raw
form to those with no knowledge of RST.</p>
<p>You can build a HTML site by doing the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">doc</span><span class="o">/</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>As always, documentation patches are very, <em>very</em> welcome as we attempt to
document the OPAL API, the device tree bindings and important parts of
OPAL internals.</p>
<p>We would like the Device Tree documentation to follow the style that can be
included in the Device Tree Specification.</p>
</div>
<div class="section" id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Make console-log time more readable: seconds rather than timebase
Log format is now <code class="docutils literal notranslate"><span class="pre">[SECONDS.(tb%512000000),LEVEL]</span></code></p>
</li>
<li><p class="first">Flash (PNOR) code improvements</p>
<ul class="simple">
<li>flash: Make size 64 bit safe
This makes the size of flash 64 bit safe so that we can have flash
devices greater than 4GB. This is especially useful for mambo disks
passed through to Linux.</li>
<li>core/flash.c: load actual partition size
We are downloading 0x20000 bytes from PNOR for CAPP, but currently the
CAPP lid is only 40K.</li>
<li>flash: Rework error paths and messages for multiple flash controllers
Now that we have mambo bogusdisk flash, we can have many flash chips.
This is resulting in some confusing output messages.</li>
</ul>
</li>
<li><p class="first">core/init: Fix “failure of getting node in the free list” warning on boot.</p>
</li>
<li><p class="first">slw: improve error message for SLW timer stuck</p>
</li>
<li><p class="first">Centaur / XSCOM error handling</p>
<ul class="simple">
<li>print message on disabling xscoms to centaur due to many errors</li>
<li>Mark centaur offline after 10 consecutive access errors</li>
</ul>
</li>
<li><p class="first">XSCOM improvements</p>
<ul class="simple">
<li>xscom: Map all HMER status codes to OPAL errors</li>
<li>xscom: Initialize the data to a known value in <code class="docutils literal notranslate"><span class="pre">xscom_read</span></code>
In case of error, don’t leave the data random. It helps debugging when
the user fails to check the error code. This happens due to a bug in the
PRD wrapper app.</li>
<li>chip: Add a quirk for when core direct control XSCOMs are missing</li>
</ul>
</li>
<li><p class="first">p8-i2c: Don’t crash if a centaur errored out</p>
</li>
<li><p class="first">cpu: Make endian switch message more informative</p>
</li>
<li><p class="first">cpu: Display number of started CPUs during boot</p>
</li>
<li><p class="first">core/init: ensure that HRMOR is zero at boot</p>
</li>
<li><p class="first">asm: Fix backtrace for unexpected exception</p>
</li>
<li><p class="first">cpu: Remove pollers calling heuristics from <code class="docutils literal notranslate"><span class="pre">cpu_wait_job</span></code>
This will be handled by <code class="docutils literal notranslate"><span class="pre">time_wait_ms()</span></code>. Also remove a useless
<code class="docutils literal notranslate"><span class="pre">smt_medium()</span></code>.
Note that this introduce a difference in behaviour: time_wait
will only call the pollers on the boot CPU while <code class="docutils literal notranslate"><span class="pre">cpu_wait_job()</span></code>
could call them on any. However, I can’t think of a case where
this is a problem.</p>
</li>
<li><p class="first">cpu: Remove global job queue
Instead, target a specific CPU for a global job at queuing time.
This will allow us to wake up the target using an interrupt when
implementing nap mode.
The algorithm used is to look for idle primary threads first, then
idle secondaries, and finally the less loaded thread. If nothing can
be found, we fallback to a synchronous call.</p>
</li>
<li><p class="first">lpc: Log LPC SYNC errors as unrecoverable ones for manufacturing</p>
</li>
<li><p class="first">lpc: Optimize SerIRQ dispatch based on which PSI IRQ fired</p>
</li>
<li><dl class="first docutils">
<dt>interrupts: Add new source <code class="docutils literal notranslate"><span class="pre">-&gt;attributes()</span></code> callback</dt>
<dd><p class="first">This allows a given source to provide per-interrupt attributes
such as whether it targets OPAL or Linux and it’s estimated
frequency.</p>
<p class="last">The former allows to get rid of the double set of ops used to
decide which interrupts go where on some modules like the PHBs
and the latter will be eventually used to implement smart
caching of the source lookups.</p>
</dd>
</dl>
</li>
<li><p class="first">opal/hmi: Fix a TOD HMI failure during a race condition.</p>
</li>
<li><p class="first">platform: Add BT to Generic platform</p>
</li>
</ul>
</div>
<div class="section" id="nvram">
<h2>NVRAM<a class="headerlink" href="#nvram" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Support <code class="docutils literal notranslate"><span class="pre">ibm,skiboot</span></code> partition for skiboot specific configuration options</li>
<li><dl class="first docutils">
<dt>flash: Size NVRAM based on ECC for OpenPOWER platforms</dt>
<dd>If NVRAM has ECC (as per the ffs header) then the actual size of the
partition is less than reported by the ffs header in the PNOR then the
actual size of the partition is less than reported by the ffs header.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="nvlink-npu">
<h2>NVLink/NPU<a class="headerlink" href="#nvlink-npu" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Fix reserved PE#</li>
<li>NPU bdfn allocation bugfix</li>
<li><dl class="first docutils">
<dt>Fix bad PE number check</dt>
<dd>NPUs have 4 PEs which are zero indexed, so {0, 1, 2, 3}.  A bad PE number
check in npu_err_inject checks if the PE number is greater than 4 as a
fail case, so it would wrongly perform operations on a non-existant PE 4.</dd>
</dl>
</li>
<li>Use PCI virtual device</li>
<li>assert the NPU irq min is aligned.</li>
<li>program NPU BUID reg properly</li>
<li><dl class="first docutils">
<dt>npu: reword “error” to indicate it’s actually a warning</dt>
<dd>Incorrect FWTS annotation.
Without this patch, you get spurious FirmWare Test Suite (FWTS) warnings
about NVLink not working on machines that aren’t fully populated with
GPUs.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>external: NPU hardware procedure script</dt>
<dd>Performing NPU hardware procedures requires some config space magic.
Put all that magic into a script, so you can just specify the target
device and the procedure number.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="pci">
<h2>PCI<a class="headerlink" href="#pci" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Generic fixes</p>
<ul>
<li><p class="first">Claim surprise hotplug capability</p>
</li>
<li><p class="first">Reserve PCI buses for RC’s slot</p>
</li>
<li><p class="first">Update PCI topology after power change</p>
</li>
<li><p class="first">Return slot cached power state</p>
</li>
<li><p class="first">Cache power state on slot without power control</p>
</li>
<li><p class="first">Avoid hot resets at boot time</p>
</li>
<li><p class="first">Fix initial PCIe slot power state</p>
</li>
<li><p class="first">Print CRS retry times
It’s useful to know the CRS retry times before the PCI device is
detected successfully. In PCI hot add case, it usually indicates
time consumed for the adapter’s firmware to be partially ready
(responsive PCI config space).</p>
</li>
<li><p class="first">core/pci: Fix the power-off timeout in <code class="docutils literal notranslate"><span class="pre">pci_slot_power_off()</span></code>
The timeout should be 1000ms instead of 1000 ticks while powering
off PCI slot in <code class="docutils literal notranslate"><span class="pre">pci_slot_power_off()</span></code>. Otherwise, it’s likely to
hit timeout powering off the PCI slot as below skiboot logs reveal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">5399576870</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span> <span class="n">PHB</span><span class="c1">#0005:02:11.0 Timeout powering off slot</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">PHB3</p>
<ul class="simple">
<li>Override root slot’s <code class="docutils literal notranslate"><span class="pre">prepare_link_change()</span></code> with PHB’s</li>
<li>Disable surprise link down event on PCI slots</li>
<li>Disable ECRC on Broadcom adapter behind PMC switch</li>
</ul>
</li>
<li><p class="first">astbmc platforms</p>
<ul class="simple">
<li>Support dynamic PCI slot. We might insert a PCIe switch to PHB direct slot
and the downstream ports of the PCIe switch supports PCI hotplug.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="capi">
<h2>CAPI<a class="headerlink" href="#capi" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>hw/phb3: Update capi initialization sequence</dt>
<dd>The capi initialization sequence was revised in a circumvention
document when a ‘link down’ error was converted from fatal to Endpoint
Recoverable. Other, non-capi, register setup was corrected even before
the initial open-source release of skiboot, but a few capi-related
registers were not updated then, so this patch fixes it.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="ipmi">
<h2>IPMI<a class="headerlink" href="#ipmi" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>core/ipmi: Set interrupt-parent property</dt>
<dd>This allows ipmi-opal to properly use the OPAL irqchip rather than
falling back to the event interface in Linux.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="mambo-simulator">
<h2>Mambo Simulator<a class="headerlink" href="#mambo-simulator" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Helpers for POWER9 Mambo.</li>
<li>mambo: Advertise available RADIX page sizes</li>
<li>mambo: Add section for kernel command line boot args
Users can set kernel command line boot arguments for Mambo in a tcl
script.</li>
<li>mambo: add exception and qtrace helpers</li>
<li>external/mambo: Update skiboot.tcl to add page-sizes nodes to device tree</li>
</ul>
</div>
<div class="section" id="simics-simulator">
<h2>Simics Simulator<a class="headerlink" href="#simics-simulator" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>chiptod: Enable ChipTOD in SIMICS</li>
</ul>
</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">pflash</p>
<ul class="simple">
<li>fix harmless buffer overflow: <code class="docutils literal notranslate"><span class="pre">fl_total_size</span></code> was <code class="docutils literal notranslate"><span class="pre">uint32_t</span></code> not <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code>.</li>
<li>Don’t try to write protect when writing to flash file</li>
<li>Misc small improvements to code and code style</li>
<li>makefile bug fixes</li>
</ul>
</li>
<li><p class="first">external/boot_tests</p>
<ul class="simple">
<li>remove lid from the BMC after flashing</li>
<li>add the nobooting option -N</li>
<li>add arbitrary lid option -F</li>
</ul>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal notranslate"><span class="pre">getscom</span></code> / <code class="docutils literal notranslate"><span class="pre">getsram</span></code> / <code class="docutils literal notranslate"><span class="pre">putscom</span></code>: Parse chip-id as hex</dt>
<dd><p class="first">We print the chip-id in hex (without a leading 0x), but we fail to
parse that same value correctly in <code class="docutils literal notranslate"><span class="pre">getscom</span></code> / <code class="docutils literal notranslate"><span class="pre">getsram</span></code> / <code class="docutils literal notranslate"><span class="pre">putscom</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># getscom -l</span>
<span class="o">...</span>
<span class="mi">80000000</span> <span class="o">|</span> <span class="n">DD2</span><span class="o">.</span><span class="mi">0</span> <span class="o">|</span> <span class="n">Centaur</span> <span class="n">memory</span> <span class="n">buffer</span>
<span class="c1"># getscom -c 80000000 201140a</span>
<span class="n">Error</span> <span class="o">-</span><span class="mi">19</span> <span class="n">reading</span> <span class="n">XSCOM</span>
</pre></div>
</div>
<p class="last">Fix this by assuming base 16 when parsing chip-id.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="prd">
<h2>PRD<a class="headerlink" href="#prd" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>opal-prd: Fix error code from <code class="docutils literal notranslate"><span class="pre">scom_read</span></code> and <code class="docutils literal notranslate"><span class="pre">scom_write</span></code></li>
<li>opal-prd: Add get_interface_capabilities to host interfaces</li>
<li>opal-prd: fix for 64-bit pnor sizes</li>
<li><dl class="first docutils">
<dt>occ/prd/opal-prd: Queue OCC_RESET event message to host in OpenPOWER</dt>
<dd>During an OCC reset cycle the system is forced to Psafe pstate.
When OCC becomes active, the system has to be restored to its
last pstate as requested by host. So host needs to be notified
of OCC_RESET event or else system will continue to remian in
Psafe state until host requests a new pstate after the OCC
reset cycle.</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="ibm-fsp-based-platforms">
<h2>IBM FSP Based Platforms<a class="headerlink" href="#ibm-fsp-based-platforms" title="Permalink to this headline">¶</a></h2>
<ul>
<li><dl class="first docutils">
<dt>fsp/console: Allocate irq for each hvc console</dt>
<dd><p class="first last">Allocate an irq number for each hvc console and set its interrupt-parent
property so that Linux can use the opal irqchip instead of the
OPAL_EVENT_CONSOLE_INPUT interface.</p>
</dd>
</dl>
</li>
<li><p class="first">platforms/firenze: Fix clock frequency dt property:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="mf">1.212366090</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="n">DT</span><span class="p">:</span> <span class="n">Unexpected</span> <span class="nb">property</span> <span class="n">length</span> <span class="o">/</span><span class="n">xscom</span><span class="nd">@3fc0000000000</span><span class="o">/</span><span class="n">i2cm</span><span class="nd">@a0020</span><span class="o">/</span><span class="n">clock</span><span class="o">-</span><span class="n">frequency</span>
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>HDAT: Fix typo in nest-frequency property</dt>
<dd><p class="first last">nest-frquency -&gt; nest-frequency</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>platforms/ibm-fsp: Use power_ctl bit when determining slot reset method</dt>
<dd><p class="first last">The power_ctl bit is used to represent if power management is available.
If power_ctl is set to true, then the I2C based external power management
functionality will be populated on the PCI slot. Otherwise we will try to
use the inband PERST as the fundamental reset, as before.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>FSP/ELOG: Fix elog timeout issue</dt>
<dd><p class="first last">Presently we set timeout value as soon as we add elog to queue. If
we have multiple elogs to write, it doesn’t consider queue wait time.
Instead set timeout value when we are actually sending elog to FSP.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>FSP/ELOG: elog_enable flag should be false by default</dt>
<dd><p class="first last">This issue is one of the corner case, which is related to recent change
went upstream and only observed in the petitboot prompt, where we see
only one error log instead of getting all error log in
<code class="docutils literal notranslate"><span class="pre">/sys/firmware/opal/elog</span></code>.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="power9">
<h2>POWER9<a class="headerlink" href="#power9" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>mambo: Make POWER9 look like DD2</li>
<li><dl class="first docutils">
<dt>flash: Move flash node under <code class="docutils literal notranslate"><span class="pre">ibm,opal/flash/</span></code></dt>
<dd>This changes the boot ABI, so it’s only active for P9 and later systems,
even though it’s unrelated to hardware changes. There is an associated
Linux change to properly search for this node as well.</dd>
</dl>
</li>
<li>core/cpu.c: Add OPAL call to setup Nest MMU</li>
<li>psi: On p9, create an interrupt-map for routing PSI interrupts</li>
<li>lpc: Add P9 LPC interrupts support</li>
<li>chiptod: Basic P9 support</li>
<li>psi: Add P9 support</li>
</ul>
</div>
<div class="section" id="testing-and-debugging">
<h2>Testing and Debugging<a class="headerlink" href="#testing-and-debugging" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>test/qemu: bump qemu version used in CI, adds IPMI support</li>
<li>platform/qemu: add BT and IPMI support
Enables testing BT and IPMI functionality in the Qemu simulator</li>
<li>init: In debug builds, enable debug output to console</li>
<li><dl class="first docutils">
<dt>mem_region: Be a bit smarter about poisoning</dt>
<dd>Don’t poison chunks that are already free and poison regions on
first allocation. This speeds things up dramatically.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>libc: Use 8-bytes stores for non-0 memset too</dt>
<dd>Memory poisoning hammers this, so let’s be a bit smart about it and
avoid falling back to byte stores when the data is not 0</dd>
</dl>
</li>
<li>fwts: add annotation for manufacturing mode</li>
<li>check: Fix bugs in mem region tests</li>
<li><dl class="first docutils">
<dt>Don’t set -fstack-protector-all unconditionally</dt>
<dd>We set it already in DEBUG builds and we use -fstack-protector-strong
in release builds which provides most of the benefits and is more
efficient.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Build host programs (and checks) with debug enabled</dt>
<dd>This enables memory poisoning in allocations and list checking
among other things.</dd>
</dl>
</li>
<li>Add global DEBUG make flag</li>
</ul>
</div>
<div class="section" id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<p>Extending the analysis done for the last few releases, we can see our trends
in code review across versions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="14%" />
<col width="17%" />
<col width="17%" />
<col width="14%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Release</th>
<th class="head">csets</th>
<th class="head">Ack</th>
<th class="head">Reviews</th>
<th class="head">Tested</th>
<th class="head">Reported</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>5.0</td>
<td>329</td>
<td>15</td>
<td>20</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>5.1</td>
<td>372</td>
<td>13</td>
<td>38</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="row-even"><td>5.2-rc1</td>
<td>334</td>
<td>20</td>
<td>34</td>
<td>6</td>
<td>11</td>
</tr>
<tr class="row-odd"><td>5.3-rc1</td>
<td>302</td>
<td>36</td>
<td>53</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="row-even"><td>5.4-rc1</td>
<td>278</td>
<td>8</td>
<td>19</td>
<td>0</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>This release has fewer changesets over previous 5.x first release candidates,
but that is not indicative of the size or complexity of these changes.</p>
<p>Processed 278 csets from 31 developers
A total of 17052 lines added, 4745 removed (delta 12307)</p>
<p>Developers with the most changesets</p>
<table border="1" class="docutils">
<colgroup>
<col width="75%" />
<col width="6%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Stewart Smith</td>
<td>71</td>
<td>(25.5%)</td>
</tr>
<tr class="row-odd"><td>Benjamin Herrenschmidt</td>
<td>50</td>
<td>(18.0%)</td>
</tr>
<tr class="row-even"><td>Claudio Carvalho</td>
<td>38</td>
<td>(13.7%)</td>
</tr>
<tr class="row-odd"><td>Gavin Shan</td>
<td>20</td>
<td>(7.2%)</td>
</tr>
<tr class="row-even"><td>Oliver O’Halloran</td>
<td>18</td>
<td>(6.5%)</td>
</tr>
<tr class="row-odd"><td>Mukesh Ojha</td>
<td>9</td>
<td>(3.2%)</td>
</tr>
<tr class="row-even"><td>Cyril Bur</td>
<td>7</td>
<td>(2.5%)</td>
</tr>
<tr class="row-odd"><td>Russell Currey</td>
<td>7</td>
<td>(2.5%)</td>
</tr>
<tr class="row-even"><td>Vasant Hegde</td>
<td>7</td>
<td>(2.5%)</td>
</tr>
<tr class="row-odd"><td>Pridhiviraj Paidipeddi</td>
<td>6</td>
<td>(2.2%)</td>
</tr>
<tr class="row-even"><td>Michael Neuling</td>
<td>6</td>
<td>(2.2%)</td>
</tr>
<tr class="row-odd"><td>Alistair Popple</td>
<td>4</td>
<td>(1.4%)</td>
</tr>
<tr class="row-even"><td>Sam Mendoza-Jonas</td>
<td>3</td>
<td>(1.1%)</td>
</tr>
<tr class="row-odd"><td>Vipin K Parashar</td>
<td>3</td>
<td>(1.1%)</td>
</tr>
<tr class="row-even"><td>Balbir Singh</td>
<td>3</td>
<td>(1.1%)</td>
</tr>
<tr class="row-odd"><td>Mahesh Salgaonkar</td>
<td>3</td>
<td>(1.1%)</td>
</tr>
<tr class="row-even"><td>Frederic Barrat</td>
<td>3</td>
<td>(1.1%)</td>
</tr>
<tr class="row-odd"><td>Chris Smart</td>
<td>2</td>
<td>(0.7%)</td>
</tr>
<tr class="row-even"><td>Jack Miller</td>
<td>2</td>
<td>(0.7%)</td>
</tr>
<tr class="row-odd"><td>Patrick Williams</td>
<td>2</td>
<td>(0.7%)</td>
</tr>
<tr class="row-even"><td>Jeremy Kerr</td>
<td>2</td>
<td>(0.7%)</td>
</tr>
<tr class="row-odd"><td>Suraj Jitindar Singh</td>
<td>2</td>
<td>(0.7%)</td>
</tr>
<tr class="row-even"><td>Milton Miller</td>
<td>2</td>
<td>(0.7%)</td>
</tr>
<tr class="row-odd"><td>Shilpasri G Bhat</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-even"><td>Frederic Bonnard</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-odd"><td>Joel Stanley</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-even"><td>Breno Leitao</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-odd"><td>Anton Blanchard</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-even"><td>Nicholas Piggin</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-odd"><td>Nageswara R Sastry</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-even"><td>Cédric Le Goater</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
</tbody>
</table>
<p>Developers with the most changed lines</p>
<table border="1" class="docutils">
<colgroup>
<col width="69%" />
<col width="11%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Claudio Carvalho</td>
<td>6817</td>
<td>(38.2%)</td>
</tr>
<tr class="row-odd"><td>Stewart Smith</td>
<td>4677</td>
<td>(26.2%)</td>
</tr>
<tr class="row-even"><td>Benjamin Herrenschmidt</td>
<td>2586</td>
<td>(14.5%)</td>
</tr>
<tr class="row-odd"><td>Gavin Shan</td>
<td>1005</td>
<td>(5.6%)</td>
</tr>
<tr class="row-even"><td>Cyril Bur</td>
<td>509</td>
<td>(2.9%)</td>
</tr>
<tr class="row-odd"><td>Mukesh Ojha</td>
<td>361</td>
<td>(2.0%)</td>
</tr>
<tr class="row-even"><td>Oliver O’Halloran</td>
<td>343</td>
<td>(1.9%)</td>
</tr>
<tr class="row-odd"><td>Russell Currey</td>
<td>343</td>
<td>(1.9%)</td>
</tr>
<tr class="row-even"><td>Balbir Singh</td>
<td>227</td>
<td>(1.3%)</td>
</tr>
<tr class="row-odd"><td>Pridhiviraj Paidipeddi</td>
<td>194</td>
<td>(1.1%)</td>
</tr>
<tr class="row-even"><td>Michael Neuling</td>
<td>121</td>
<td>(0.7%)</td>
</tr>
<tr class="row-odd"><td>Cédric Le Goater</td>
<td>115</td>
<td>(0.6%)</td>
</tr>
<tr class="row-even"><td>Vipin K Parashar</td>
<td>68</td>
<td>(0.4%)</td>
</tr>
<tr class="row-odd"><td>Alistair Popple</td>
<td>66</td>
<td>(0.4%)</td>
</tr>
<tr class="row-even"><td>Vasant Hegde</td>
<td>65</td>
<td>(0.4%)</td>
</tr>
<tr class="row-odd"><td>Shilpasri G Bhat</td>
<td>45</td>
<td>(0.3%)</td>
</tr>
<tr class="row-even"><td>Suraj Jitindar Singh</td>
<td>41</td>
<td>(0.2%)</td>
</tr>
<tr class="row-odd"><td>Nicholas Piggin</td>
<td>34</td>
<td>(0.2%)</td>
</tr>
<tr class="row-even"><td>Sam Mendoza-Jonas</td>
<td>33</td>
<td>(0.2%)</td>
</tr>
<tr class="row-odd"><td>Jack Miller</td>
<td>32</td>
<td>(0.2%)</td>
</tr>
<tr class="row-even"><td>Nageswara R Sastry</td>
<td>32</td>
<td>(0.2%)</td>
</tr>
<tr class="row-odd"><td>Jeremy Kerr</td>
<td>23</td>
<td>(0.1%)</td>
</tr>
<tr class="row-even"><td>Mahesh Salgaonkar</td>
<td>21</td>
<td>(0.1%)</td>
</tr>
<tr class="row-odd"><td>Chris Smart</td>
<td>20</td>
<td>(0.1%)</td>
</tr>
<tr class="row-even"><td>Milton Miller</td>
<td>19</td>
<td>(0.1%)</td>
</tr>
<tr class="row-odd"><td>Patrick Williams</td>
<td>11</td>
<td>(0.1%)</td>
</tr>
<tr class="row-even"><td>Frederic Barrat</td>
<td>6</td>
<td>(0.0%)</td>
</tr>
<tr class="row-odd"><td>Anton Blanchard</td>
<td>3</td>
<td>(0.0%)</td>
</tr>
<tr class="row-even"><td>Frederic Bonnard</td>
<td>2</td>
<td>(0.0%)</td>
</tr>
<tr class="row-odd"><td>Joel Stanley</td>
<td>2</td>
<td>(0.0%)</td>
</tr>
<tr class="row-even"><td>Breno Leitao</td>
<td>2</td>
<td>(0.0%)</td>
</tr>
</tbody>
</table>
<p>Developers with the most lines removed</p>
<table border="1" class="docutils">
<colgroup>
<col width="69%" />
<col width="11%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Cyril Bur</td>
<td>299</td>
<td>(6.3%)</td>
</tr>
</tbody>
</table>
<p>Developers with the most signoffs (total 226)</p>
<table border="1" class="docutils">
<colgroup>
<col width="69%" />
<col width="11%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Stewart Smith</td>
<td>219</td>
<td>(96.9%)</td>
</tr>
<tr class="row-odd"><td>Alistair Popple</td>
<td>4</td>
<td>(1.8%)</td>
</tr>
<tr class="row-even"><td>Cyril Bur</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-odd"><td>Jeremy Kerr</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
<tr class="row-even"><td>Benjamin Herrenschmidt</td>
<td>1</td>
<td>(0.4%)</td>
</tr>
</tbody>
</table>
<p>Developers with the most reviews (total 19)</p>
<table border="1" class="docutils">
<colgroup>
<col width="69%" />
<col width="11%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Mukesh Ojha</td>
<td>5</td>
<td>(26.3%)</td>
</tr>
<tr class="row-odd"><td>Andrew Donnellan</td>
<td>4</td>
<td>(21.1%)</td>
</tr>
<tr class="row-even"><td>Vasant Hegde</td>
<td>3</td>
<td>(15.8%)</td>
</tr>
<tr class="row-odd"><td>Russell Currey</td>
<td>3</td>
<td>(15.8%)</td>
</tr>
<tr class="row-even"><td>Balbir Singh</td>
<td>2</td>
<td>(10.5%)</td>
</tr>
<tr class="row-odd"><td>Cyril Bur</td>
<td>1</td>
<td>(5.3%)</td>
</tr>
<tr class="row-even"><td>Vaidyanathan Srinivasan</td>
<td>1</td>
<td>(5.3%)</td>
</tr>
</tbody>
</table>
<p>Developers with the most test credits (total 0)</p>
<p>Developers who gave the most tested-by credits (total 0)</p>
<p>Developers with the most report credits (total 4)</p>
<table border="1" class="docutils">
<colgroup>
<col width="69%" />
<col width="11%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Benjamin Herrenschmidt</td>
<td>1</td>
<td>(25.0%)</td>
</tr>
<tr class="row-odd"><td>Li Meng</td>
<td>1</td>
<td>(25.0%)</td>
</tr>
<tr class="row-even"><td>Pridhiviraj Paidipeddi</td>
<td>1</td>
<td>(25.0%)</td>
</tr>
<tr class="row-odd"><td>Gavin Shan</td>
<td>1</td>
<td>(25.0%)</td>
</tr>
</tbody>
</table>
<p>Developers who gave the most report credits (total 4)</p>
<table border="1" class="docutils">
<colgroup>
<col width="69%" />
<col width="11%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Gavin Shan</td>
<td>1</td>
<td>(25.0%)</td>
</tr>
<tr class="row-odd"><td>Vasant Hegde</td>
<td>1</td>
<td>(25.0%)</td>
</tr>
<tr class="row-even"><td>Russell Currey</td>
<td>1</td>
<td>(25.0%)</td>
</tr>
<tr class="row-odd"><td>Stewart Smith</td>
<td>1</td>
<td>(25.0%)</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">skiboot-5.4.0-rc1</a><ul>
<li><a class="reference internal" href="#new-features">New Features</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#general">General</a></li>
<li><a class="reference internal" href="#nvram">NVRAM</a></li>
<li><a class="reference internal" href="#nvlink-npu">NVLink/NPU</a></li>
<li><a class="reference internal" href="#pci">PCI</a></li>
<li><a class="reference internal" href="#capi">CAPI</a></li>
<li><a class="reference internal" href="#ipmi">IPMI</a></li>
<li><a class="reference internal" href="#mambo-simulator">Mambo Simulator</a></li>
<li><a class="reference internal" href="#simics-simulator">Simics Simulator</a></li>
<li><a class="reference internal" href="#utilities">Utilities</a></li>
<li><a class="reference internal" href="#prd">PRD</a></li>
<li><a class="reference internal" href="#ibm-fsp-based-platforms">IBM FSP Based Platforms</a></li>
<li><a class="reference internal" href="#power9">POWER9</a></li>
<li><a class="reference internal" href="#testing-and-debugging">Testing and Debugging</a></li>
<li><a class="reference internal" href="#contributors">Contributors</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="skiboot-5.4.0.html"
                        title="previous chapter">skiboot-5.4.0</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="skiboot-5.4.0-rc2.html"
                        title="next chapter">skiboot-5.4.0-rc2</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/release-notes/skiboot-5.4.0-rc1.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="skiboot-5.4.0-rc2.html" title="skiboot-5.4.0-rc2"
             >next</a> |</li>
        <li class="right" >
          <a href="skiboot-5.4.0.html" title="skiboot-5.4.0"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">skiboot d6d8386
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Release Notes</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2017, IBM, others.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>