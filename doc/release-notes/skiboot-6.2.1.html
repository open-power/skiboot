<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>skiboot-6.2.1 &#8212; skiboot 2ce4017
 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=514cf933" />
    
    <script src="../_static/documentation_options.js?v=e6376a65"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skiboot-6.2.2" href="skiboot-6.2.2.html" />
    <link rel="prev" title="skiboot-6.2-rc2" href="skiboot-6.2-rc2.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="skiboot-6.2.2.html" title="skiboot-6.2.2"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="skiboot-6.2-rc2.html" title="skiboot-6.2-rc2"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">skiboot 2ce4017
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Release Notes</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">skiboot-6.2.1</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="skiboot-6-2-1">
<span id="id1"></span><h1>skiboot-6.2.1<a class="headerlink" href="#skiboot-6-2-1" title="Link to this heading">¶</a></h1>
<p>skiboot 6.2.1 was released on Wednesday February 20th, 2019. It replaces
<a class="reference internal" href="skiboot-6.2.html#skiboot-6-2"><span class="std std-ref">skiboot-6.2</span></a> as the current stable release in the 6.2.x series.</p>
<p>It is recommended that 6.2.1 be used instead of any previous 6.2.x version
due to the bug fixes it contains.</p>
<p>Bug fixes included in this release are:</p>
<ul>
<li><p>libflash/ecc: Fix compilation warning with gcc9</p>
<p>Fixes: <a class="reference external" href="https://github.com/open-power/skiboot/issues/218">https://github.com/open-power/skiboot/issues/218</a></p>
</li>
<li><p>core/opal: Print PIR value in exit path, useful for debugging</p></li>
<li><p>core/ipmi: Improve error message</p></li>
<li><p>firmware-versions: Add test case for parsing VERSION</p>
<p>If we hit a entry in VERSION that is larger than our
buffer size, we skip over it gracefully rather than overwriting the
stack. This is only a problem if VERSION isn’t trusted, which as of
4b8cc05a94513816d43fb8bd6178896b430af08f it is verified as part of
Secure Boot.</p>
</li>
<li><p>core/cpu: HID update race</p>
<p>If the per-core HID register is updated concurrently by multiple
threads, updates can get lost. This has been observed during fast
reboot where the HILE bit does not get cleared on all cores, which
can cause machine check exception interrupts to crash.</p>
<p>Fix this by only updating HID on thread0.</p>
</li>
<li><p>cpufeatures: Always advertise POWER8NVL as DD2</p>
<p>Despite the major version of PVR being 1 (0x004c0100) for POWER8NVL,
these chips are functionally equalent to P8/P8E DD2 levels.</p>
<p>This advertises POWER8NVL as DD2. As the result, skiboot adds
ibm,powerpc-cpu-features/processor-control-facility for such CPUs and
the linux kernel can use hypervisor doorbell messages to wake secondary
threads; otherwise “KVM: CPU %d seems to be stuck” would appear because
of missing LPCR_PECEDH.</p>
</li>
<li><p>p9dsu: Fix p9dsu slot tables</p>
<p>Set the attributes on the slot tables to account for
builtin or pluggable etypes, this will allow pci
enumeration to calculate subordinate buses.</p>
<p>Update some slot label strings.</p>
<p>Add WIO Slot5 which is standard on the ESS config.</p>
</li>
<li><p>core/lock: Stop drop_my_locks() from always causing abort</p>
<p>The loop in drop_my_locks() looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="p">((</span><span class="n">l</span> <span class="o">=</span> <span class="n">list_pop</span><span class="p">(</span><span class="o">&amp;</span><span class="n">this_cpu</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">locks_held</span><span class="p">,</span> <span class="n">struct</span> <span class="n">lock</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="o">!=</span> <span class="n">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">warn</span><span class="p">)</span>
                <span class="n">prlog</span><span class="p">(</span><span class="n">PR_ERR</span><span class="p">,</span> <span class="s2">&quot;  </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">l</span><span class="o">-&gt;</span><span class="n">owner</span><span class="p">);</span>
        <span class="n">unlock</span><span class="p">(</span><span class="n">l</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Both list_pop() and unlock() call list_del(). This means that on the
last iteration of the loop, the list will be empty when we get to
unlock_check(), causing this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LOCK ERROR: Releasing lock we don&#39;t hold depth @0x30493d20 (state: 0x0000000000000001)
[13836.000173140,0] Aborting!
CPU 0000 Backtrace:
 S: 0000000031c03930 R: 000000003001d840   ._abort+0x60
 S: 0000000031c039c0 R: 000000003001a0c4   .lock_error+0x64
 S: 0000000031c03a50 R: 0000000030019c70   .unlock+0x54
 S: 0000000031c03af0 R: 000000003001a040   .drop_my_locks+0xf4
</pre></div>
</div>
<p>To fix this, change list_pop() to list_top().</p>
</li>
<li><p>p9dsu: Fix p9dsu default variant</p>
<p>Add the default when no riser_id is returned from the ipmi query.</p>
<p>Allow a little more time for BMC reply and cleanup some label strings.</p>
</li>
</ul>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="skiboot-6.2-rc2.html"
                          title="previous chapter">skiboot-6.2-rc2</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="skiboot-6.2.2.html"
                          title="next chapter">skiboot-6.2.2</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/release-notes/skiboot-6.2.1.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="skiboot-6.2.2.html" title="skiboot-6.2.2"
             >next</a> |</li>
        <li class="right" >
          <a href="skiboot-6.2-rc2.html" title="skiboot-6.2-rc2"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">skiboot 2ce4017
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Release Notes</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">skiboot-6.2.1</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2016-2017, IBM, others.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>