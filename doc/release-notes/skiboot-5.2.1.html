
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>skiboot-5.2.1 &#8212; skiboot 326a466
 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skiboot-5.2.2" href="skiboot-5.2.2.html" />
    <link rel="prev" title="skiboot-5.2.0-rc2" href="skiboot-5.2.0-rc2.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="skiboot-5.2.2.html" title="skiboot-5.2.2"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="skiboot-5.2.0-rc2.html" title="skiboot-5.2.0-rc2"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">skiboot 326a466
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Release Notes</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">skiboot-5.2.1</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="skiboot-5-2-1">
<h1>skiboot-5.2.1<a class="headerlink" href="#skiboot-5-2-1" title="Permalink to this headline">¶</a></h1>
<p>skiboot-5.2.1 was released on Wednesday April 27th, 2016.</p>
<p>skiboot-5.2.1 is the second stable release of skiboot 5.2, the new stable
release of skiboot, which will take over from the 5.1.x series which was
first released August 17th, 2015.</p>
<p>skiboot-5.2.1 contains all bug fixes as of skiboot-5.1.15.</p>
<p>This is the second release that will follow the (now documented) Skiboot
stable rules - see <a class="reference internal" href="../process/stable-skiboot-rules.html#stable-rules"><span class="std std-ref">Skiboot stable tree rules and releases</span></a>.</p>
<section id="changes">
<h2>Changes<a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h2>
<p>Over skiboot-5.2.0, the following fixes are included:</p>
<section id="pflash">
<h3>pflash<a class="headerlink" href="#pflash" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Allow building under yocto.
Makefile fixes to enable building as part of an OpenBMC build.</p></li>
</ul>
</section>
<section id="garrison-platform">
<h3>Garrison platform<a class="headerlink" href="#garrison-platform" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add PCIe and NPU slot location names</p></li>
<li><p>hw/npu.c: Add ibm, npu-index property to npu device tree</p></li>
<li><p>hmi: Add handling for NPU checkstops</p></li>
</ul>
</section>
<section id="phb3-all-power8-platforms">
<h3>PHB3 (all POWER8 platforms)<a class="headerlink" href="#phb3-all-power8-platforms" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>hw/phb3: Ensure PQ bits are cleared in the IVC when masking IRQ
When we mask an interrupt, we may race with another interrupt coming
in from the hardware.  If this occurs, the P and/or Q bit may end up
being set but we never EOI/clear them.  This could result in a lost
interrupt or the next interrupt that comes in after re-enabling never
being presented.</p>
<p>This fixes a bug seen with some CAPI workloads which have lots of
interrupt masking at the same time as high interrupt load.  The fix is
not specific to CAPI though.</p>
</li>
<li><p>hw/phb3: Fix potential race in EOI
When we EOI we need to clear the present (P) bit in the Interrupt
Vector Cache (IVC).  We must clear P ensuring that any additional
interrupts that come in aren’t lost while also maintaining coherency
with the Interrupt Vector Table (IVT).</p>
<p>To do this, the hardware provides a conditional update bit in the
IVC. This bit ensures that generation counts between the IVT and the
IVC updates are synchronised.</p>
<p>Unfortunately we never set this the bit to conditionally update the P
bit in the IVC based on the generation count.  Also, we didn’t set
what we wanted the new generation count to be if the update was
successful.</p>
</li>
</ul>
</section>
<section id="fsp-platforms">
<h3>FSP platforms<a class="headerlink" href="#fsp-platforms" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>OPAL:Handle mbox response with bad status:0x24 during FSP termination
OPAL committed a predictive log with SRC BB822411 in some situations.</p></li>
</ul>
</section>
<section id="generic">
<h3>Generic<a class="headerlink" href="#generic" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>hmi: Fix a bug where partial hmi event was reported to host.
This bug fix ensures the CPU PIR is reported correctly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="p">[</span>  <span class="mf">305.628283</span><span class="p">]</span> <span class="n">Fatal</span> <span class="n">Hypervisor</span> <span class="n">Maintenance</span> <span class="n">interrupt</span> <span class="p">[</span><span class="n">Not</span> <span class="n">recovered</span><span class="p">]</span>
  <span class="p">[</span>  <span class="mf">305.628341</span><span class="p">]</span>  <span class="n">Error</span> <span class="n">detail</span><span class="p">:</span> <span class="n">Malfunction</span> <span class="n">Alert</span>
  <span class="p">[</span>  <span class="mf">305.628388</span><span class="p">]</span>    <span class="n">HMER</span><span class="p">:</span> <span class="mi">8040000000000000</span>
<span class="o">-</span> <span class="p">[</span>  <span class="mf">305.628423</span><span class="p">]</span>    <span class="n">CPU</span> <span class="n">PIR</span><span class="p">:</span> <span class="mi">00000000</span>
<span class="o">+</span> <span class="p">[</span>  <span class="mf">200.123021</span><span class="p">]</span>    <span class="n">CPU</span> <span class="n">PIR</span><span class="p">:</span> <span class="mf">000008e8</span>
  <span class="p">[</span>  <span class="mf">305.628458</span><span class="p">]</span>    <span class="p">[</span><span class="n">Unit</span><span class="p">:</span> <span class="n">VSU</span><span class="p">]</span> <span class="n">Logic</span> <span class="n">core</span> <span class="n">check</span> <span class="n">stop</span>
</pre></div>
</div>
</li>
<li><p>xscom: Return OPAL_WRONG_STATE on XSCOM ops if CPU is asleep</p></li>
</ul>
</section>
</section>
<section id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<p>Processed 15 csets from 7 developers
A total of 436 lines added, 59 removed (delta 377)</p>
<p>Developers with the most changesets</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 74%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Russell Currey</p></td>
<td><p>7 (46.7%)</p></td>
</tr>
<tr class="row-odd"><td><p>Alistair Popple</p></td>
<td><p>2 (13.3%)</p></td>
</tr>
<tr class="row-even"><td><p>Michael Neuling</p></td>
<td><p>2 (13.3%)</p></td>
</tr>
<tr class="row-odd"><td><p>Patrick Williams</p></td>
<td><p>1 (6.7%)</p></td>
</tr>
<tr class="row-even"><td><p>Stewart Smith</p></td>
<td><p>1 (6.7%)</p></td>
</tr>
<tr class="row-odd"><td><p>Mamatha</p></td>
<td><p>1 (6.7%)</p></td>
</tr>
<tr class="row-even"><td><p>Mahesh Salgaonkar</p></td>
<td><p>1 (6.7%)</p></td>
</tr>
</tbody>
</table>
<p>Developers with the most changed lines</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Alistair Popple</p></td>
<td><p>215 (48.3%)</p></td>
</tr>
<tr class="row-odd"><td><p>Russell Currey</p></td>
<td><p>140 (31.5%)</p></td>
</tr>
<tr class="row-even"><td><p>Michael Neuling</p></td>
<td><p>55 (12.4%)</p></td>
</tr>
<tr class="row-odd"><td><p>Mamatha</p></td>
<td><p>15 (3.4%)</p></td>
</tr>
<tr class="row-even"><td><p>Patrick Williams</p></td>
<td><p>9 (2.0%)</p></td>
</tr>
<tr class="row-odd"><td><p>Mahesh Salgaonkar</p></td>
<td><p>8 (1.8%)</p></td>
</tr>
<tr class="row-even"><td><p>Stewart Smith</p></td>
<td><p>3 (0.7%)</p></td>
</tr>
</tbody>
</table>
<p>Developers with the most lines removed</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Patrick Williams</p></td>
<td><p>5 (8.5%)</p></td>
</tr>
</tbody>
</table>
<p>Developers with the most signoffs (total 30)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Stewart Smith</p></td>
<td><p>15 (50.0%)</p></td>
</tr>
<tr class="row-odd"><td><p>Russell Currey</p></td>
<td><p>7 (23.3%)</p></td>
</tr>
<tr class="row-even"><td><p>Michael Neuling</p></td>
<td><p>2 (6.7%)</p></td>
</tr>
<tr class="row-odd"><td><p>Alistair Popple</p></td>
<td><p>2 (6.7%)</p></td>
</tr>
<tr class="row-even"><td><p>Patrick Williams</p></td>
<td><p>1 (3.3%)</p></td>
</tr>
<tr class="row-odd"><td><p>Oliver O’Halloran</p></td>
<td><p>1 (3.3%)</p></td>
</tr>
<tr class="row-even"><td><p>Mahesh Salgaonkar</p></td>
<td><p>1 (3.3%)</p></td>
</tr>
<tr class="row-odd"><td><p>Mamatha</p></td>
<td><p>1 (3.3%)</p></td>
</tr>
</tbody>
</table>
<p>Developers with the most reviews (total 11)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Alistair Popple</p></td>
<td><p>5 (45.5%)</p></td>
</tr>
<tr class="row-odd"><td><p>Andrew Donnellan</p></td>
<td><p>3 (27.3%)</p></td>
</tr>
<tr class="row-even"><td><p>Mahesh Salgaonkar</p></td>
<td><p>2 (18.2%)</p></td>
</tr>
<tr class="row-odd"><td><p>Joel Stanley</p></td>
<td><p>1 (9.1%)</p></td>
</tr>
</tbody>
</table>
<p>Developers with the most Acked-by (total 1)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Alistair Popple</p></td>
<td><p>1 (100.0%)</p></td>
</tr>
</tbody>
</table>
<p>Developers with the most test credits (total 3)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Andrew Donnellan</p></td>
<td><p>2 (66.7%)</p></td>
</tr>
<tr class="row-odd"><td><p>Vaibhav Jain</p></td>
<td><p>1 (33.3%)</p></td>
</tr>
</tbody>
</table>
<p>Developers who received the most tested-by credits (total 3)</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Michael Neuling</p></td>
<td><p>3 (100.0%)</p></td>
</tr>
</tbody>
</table>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">skiboot-5.2.1</a><ul>
<li><a class="reference internal" href="#changes">Changes</a><ul>
<li><a class="reference internal" href="#pflash">pflash</a></li>
<li><a class="reference internal" href="#garrison-platform">Garrison platform</a></li>
<li><a class="reference internal" href="#phb3-all-power8-platforms">PHB3 (all POWER8 platforms)</a></li>
<li><a class="reference internal" href="#fsp-platforms">FSP platforms</a></li>
<li><a class="reference internal" href="#generic">Generic</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contributors">Contributors</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="skiboot-5.2.0-rc2.html"
                        title="previous chapter">skiboot-5.2.0-rc2</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="skiboot-5.2.2.html"
                        title="next chapter">skiboot-5.2.2</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/release-notes/skiboot-5.2.1.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="skiboot-5.2.2.html" title="skiboot-5.2.2"
             >next</a> |</li>
        <li class="right" >
          <a href="skiboot-5.2.0-rc2.html" title="skiboot-5.2.0-rc2"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">skiboot 326a466
 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Release Notes</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">skiboot-5.2.1</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2017, IBM, others.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>